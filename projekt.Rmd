---
title: "Poročilo pri predmetu Analiza podatkov s programom R"
author: "Bor Rotar"
output:
  html_document: default
  pdf_document:
    includes:
      in_header: lib/styles.sty
    latex_engine: xelatex
---

```{r setup, echo=FALSE, results='hide', message=FALSE}
# Če želimo nastaviti pisave v PDF-ju, odkomentiramo
# in sledimo navodilom v programu.
#source("fontconfig.r", encoding = "UTF-8")

# Uvoz vseh potrebnih knjižnic
source("lib/libraries.r", encoding = "UTF-8")
```

# Izbira teme

V projektu bom analiziral in združil podatke o indikatorjih razvoja posameznih držav ZN, in iskal možne povezave z naravoslovnimi podatki(oddaljenost od ekvatorja, povprečna temperatura), poskušal bom določiti kateri indikatorji so v skladu s teorijo, da se razvojna stopnja povečuje z oddaljenostjo od ekvatorja in katere države izstopajo. 


Za naravoslovne podtake bom uporabil vikipedijo in global data bank, za indikatorje razvoja pa data.un.org (podatkovna baza ZN).
Ker pri nekaterih državah ni podatkov za vsako leto, bom pri vseh upošteval podatke za zadnje leto, ki je na voljo. Po potrebi bom dodal še kakšne bolj zanimive indikatorje razvoja.

Za indikatorje razvoja bom upošteval:

* BDP per capita
* pričakovana starost
* število let šolanja
* število umorov
 ...

***

# Obdelava, uvoz in čiščenje podatkov

```{r uvoz, echo=FALSE, message=FALSE}
source("uvoz/uvoz.r", encoding = "UTF-8")
```

Uvozil sem podatke o geografski širini (oblika CSV), o umorih z Wikipedije + celinami(oblika html), o HDI indeksu in komponentah (oblika xls). Pri podatkih sem pobrisal nepotrebne stolpce in vrstice.S funkcijo parse_number sem še poskrbel, da se vsi številski podatkidejansko številke.

Pri vseh treh razpredelnicah sem preimenovak države tako, da se vsa imena ujemajo, ter jih po imenu držav združil v eno večjo razpredelnico("skupaj") oblike *tidy data*. Spremenil sem še nekatera imena držav, za kasnejšo vizualizacijo z zemljevidom.

oblika razpredelice:(stolpci)

1.HDI rank - rangiranje vseh držav ZN
2.Country - imena držav
3.HDI value 2014
4.Life expectancy years - pričakovana življenska doba
5.Expected years of schooling
6.Mean years of schooling
7.GNI per capita
8.GNI pc rank - HDI rank
9.kratica (države)
10.latitude - Geografska širina države
11.rate - Število umorov na 100000 prebivalcec
12.count - Dejansko število umorov
13.region - celina
14.subregion - west/central/east... celine



***

# Analiza in vizualizacija podatkov

```{r vizualizacija, echo=FALSE, message=FALSE, warning=FALSE}
source("vizualizacija/vizualizacija.r", encoding = "UTF-8")
```

Najprej sem še uvozil zemljevid sveta s politično delitvijo.

```{r graf1a, echo=FALSE, message=FALSE, warning=FALSE}
print(graf1a)
```
graf1a prikazuje murder rate gleda na geografsko širino. Opazimo, da se število umorov proti severni polobli hitreje zniža (proti 70sgš)

```{r graf1b, echo=FALSE, message=FALSE, warning=FALSE}
print(graf1b)
```
pri graf1b sem dodal še celine(barve) 

```{r graf2a, echo=FALSE, message=FALSE, warning=FALSE}
print(graf2a)
```
```{r graf2b, echo=FALSE, message=FALSE, warning=FALSE}
print(graf2b)
```
```{r graf2c, echo=FALSE, message=FALSE, warning=FALSE}
print(graf2c)
```
ti grafi pokažejo kako natančen je hdi rank

```{r graf3a, echo=FALSE, message=FALSE, warning=FALSE}
print(graf3a)
```

```{r graf3b, echo=FALSE, message=FALSE, warning=FALSE}
print(graf3b)
```

```{r graf3c, echo=FALSE, message=FALSE, warning=FALSE}
print(graf3c)
```

```{r graf3d, echo=FALSE, message=FALSE, warning=FALSE}
print(graf3d)
```

```{r graf3e, echo=FALSE, message=FALSE, warning=FALSE}
print(graf3e)
```

```{r map1, echo=FALSE, message=FALSE, warning=FALSE}
print(map1)
```
korekcijski zemljevid,da vidimo če je geografska širina držav pravilna

```{r map2, echo=FALSE, message=FALSE, warning=FALSE}
print(map2)
```
pričakovana starost

***

# Napredna analiza podatkov

```{r analiza, echo=FALSE, message=FALSE}
source("analiza/analiza.r", encoding = "UTF-8")
```

Spodnji graf prikazuje povezavo med številom naselij in površino občine.

```{r graf, echo=FALSE, fig.align='center', fig.cap='Povezava med številom naselij in površino občine'}
ggplot(inner_join(obcine, data.frame(obcina = names(skupine),
                                     skupina = factor(skupine)), by = "obcina")
, aes(x = povrsina, y = naselja, color = skupina, size = prebivalci/1000)) + geom_point() +
  ggtitle("Število naselij glede na površino občine") +
  xlab(expression("Površina (km"^2 * ")")) + ylab("Št. naselij") +
  guides(color = guide_legend(title = "Skupina"),
         size = guide_legend(title = "Prebivalci (* 1000)"))
```

***

```{r shiny, echo = FALSE}
shinyAppDir("shiny", options=list(width="100%", height=600))
```
